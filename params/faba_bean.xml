<?xml version="1.0" encoding="UTF-8"?>
<!--
  Faba Bean (Vicia faba) Plant Architecture Parameters
  
  Based on:
  - Typical faba bean morphology (semi-erect growth habit)
  - Compound pinnate leaves with 2-7 leaflets
  - Main stem height: 60-120 cm (dwarf to tall varieties)
  - Leaf area index: 3-6 at full canopy
  
  References:
  - Loss & Siddique (1994) Plant and Soil
  - Confalone et al. (2010) Field Crops Research
-->

<plant_architecture>
  
  <!-- Species identifier -->
  <species>faba_bean</species>
  <common_name>Faba Bean (Vicia faba)</common_name>
  
  <!-- Growth parameters -->
  <growth>
    <!-- Main stem height (meters) - uniform distribution for variability -->
    <stem_height>
      <distribution>uniform</distribution>
      <min>0.60</min>
      <max>1.00</max>
    </stem_height>
    
    <!-- Stem diameter (meters) -->
    <stem_diameter>
      <distribution>uniform</distribution>
      <min>0.008</min>
      <max>0.012</max>
    </stem_diameter>
    
    <!-- Number of main stem nodes -->
    <nodes_per_stem>
      <distribution>poisson</distribution>
      <mean>12</mean>
      <min>8</min>
      <max>18</max>
    </nodes_per_stem>
    
    <!-- Internode length (meters) -->
    <internode_length>
      <distribution>normal</distribution>
      <mean>0.075</mean>
      <stddev>0.015</stddev>
      <min>0.04</min>
      <max>0.12</max>
    </internode_length>
  </growth>
  
  <!-- Leaf morphology -->
  <leaves>
    <!-- Leaf arrangement -->
    <phyllotaxis>alternate</phyllotaxis>
    
    <!-- Number of leaves per node -->
    <leaves_per_node>1</leaves_per_node>
    
    <!-- Compound pinnate leaf structure -->
    <leaf_type>compound_pinnate</leaf_type>
    
    <!-- Number of leaflets per compound leaf -->
    <leaflets_per_leaf>
      <distribution>discrete</distribution>
      <values>2,3,4,5,6</values>
      <probabilities>0.1,0.2,0.3,0.25,0.15</probabilities>
    </leaflets_per_leaf>
    
    <!-- Leaflet dimensions -->
    <leaflet_length>
      <distribution>normal</distribution>
      <mean>0.055</mean>
      <stddev>0.012</stddev>
      <min>0.03</min>
      <max>0.09</max>
    </leaflet_length>
    
    <leaflet_width>
      <distribution>normal</distribution>
      <mean>0.032</mean>
      <stddev>0.008</stddev>
      <min>0.018</min>
      <max>0.055</max>
    </leaflet_width>
    
    <!-- Leaflet shape -->
    <leaflet_shape>elliptical</leaflet_shape>
    
    <!-- Leaf angle from stem (degrees) -->
    <leaf_angle>
      <distribution>normal</distribution>
      <mean>45</mean>
      <stddev>15</stddev>
      <min>20</min>
      <max>75</max>
    </leaf_angle>
    
    <!-- Leaflet curvature -->
    <leaflet_curvature>
      <distribution>uniform</distribution>
      <min>0.05</min>
      <max>0.15</max>
    </leaflet_curvature>
    
    <!-- Petiole length (meters) -->
    <petiole_length>
      <distribution>normal</distribution>
      <mean>0.025</mean>
      <stddev>0.008</stddev>
      <min>0.01</min>
      <max>0.045</max>
    </petiole_length>
    
    <!-- Rachis length (compound leaf axis, meters) -->
    <rachis_length>
      <distribution>normal</distribution>
      <mean>0.08</mean>
      <stddev>0.02</stddev>
      <min>0.04</min>
      <max>0.14</max>
    </rachis_length>
  </leaves>
  
  <!-- Optical properties -->
  <optics>
    <!-- Leaf reflectance (RGB approximation) -->
    <leaf_color>
      <r>0.18</r>  <!-- Red -->
      <g>0.45</g>  <!-- Green (dominant in vegetation) -->
      <b>0.12</b>  <!-- Blue -->
    </leaf_color>
    
    <!-- Leaf transmittance -->
    <leaf_transmittance>0.08</leaf_transmittance>
    
    <!-- Stem color (brownish-green) -->
    <stem_color>
      <r>0.35</r>
      <g>0.42</g>
      <b>0.25</b>
    </stem_color>
    
    <!-- Specular properties (for realistic rendering) -->
    <leaf_specularity>0.15</leaf_specularity>
    <leaf_roughness>0.6</leaf_roughness>
  </optics>
  
  <!-- Branching (faba bean typically unbranched or few branches) -->
  <branching>
    <branch_probability>0.15</branch_probability>
    <max_branches_per_node>1</max_branches_per_node>
    
    <branch_angle>
      <distribution>uniform</distribution>
      <min>35</min>
      <max>55</max>
    </branch_angle>
    
    <branch_length_ratio>
      <!-- Branch length as ratio of main stem -->
      <distribution>uniform</distribution>
      <min>0.3</min>
      <max>0.6</max>
    </branch_length_ratio>
  </branching>
  
  <!-- Pods (optional - can be disabled for LAI-only studies) -->
  <pods>
    <include_pods>false</include_pods>
    <!-- Set to true if you want pod geometry -->
    
    <pods_per_node>
      <distribution>poisson</distribution>
      <mean>2</mean>
      <max>5</max>
    </pods_per_node>
    
    <pod_length>
      <distribution>normal</distribution>
      <mean>0.09</mean>
      <stddev>0.02</stddev>
    </pod_length>
    
    <pod_width>
      <distribution>uniform</distribution>
      <min>0.012</min>
      <max>0.018</max>
    </pod_width>
  </pods>
  
  <!-- Root system (optional - typically below ground) -->
  <roots>
    <include_roots>false</include_roots>
  </roots>
  
  <!-- Rendering hints -->
  <rendering>
    <!-- Mesh resolution for leaves (lower = faster, higher = more realistic) -->
    <leaf_subdivision_level>2</leaf_subdivision_level>
    
    <!-- Texture mapping -->
    <use_textures>false</use_textures>
    <!-- Set to true if you have leaf/stem texture files -->
    
    <texture_files>
      <leaf>textures/leaf_texture.png</leaf>
      <stem>textures/stem_texture.png</stem>
    </texture_files>
  </rendering>
  
</plant_architecture>
